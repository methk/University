"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = require("tslib");
var axios_1 = tslib_1.__importDefault(require("axios"));
var RadixAtomModel_1 = require("../RadixAtomModel");
/**
 * Radix node discovery from a seed node
 */
var RadixNodeDiscoveryFromSeed = /** @class */ (function () {
    /**
     * Creates an instance of radix node discovery from seed.
     * @param bootstrapNode Full address to the rpc endpoint of a Radix node in the universe
     */
    function RadixNodeDiscoveryFromSeed(bootstrapNode) {
        this.bootstrapNode = bootstrapNode;
    }
    RadixNodeDiscoveryFromSeed.prototype.loadNodes = function () {
        return tslib_1.__awaiter(this, void 0, void 0, function () {
            var getPeersRequestData, nodeListResponse;
            return tslib_1.__generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        getPeersRequestData = {
                            id: 0,
                            method: 'Network.getLivePeers',
                            params: []
                        };
                        return [4 /*yield*/, axios_1.default.post(this.bootstrapNode, getPeersRequestData)];
                    case 1:
                        nodeListResponse = _a.sent();
                        return [2 /*return*/, RadixAtomModel_1.RadixSerializer.fromJson(nodeListResponse.data.result)];
                }
            });
        });
    };
    return RadixNodeDiscoveryFromSeed;
}());
exports.default = RadixNodeDiscoveryFromSeed;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiUmFkaXhOb2RlRGlzY292ZXJ5RnJvbVNlZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9zcmMvbW9kdWxlcy91bml2ZXJzZS9SYWRpeE5vZGVEaXNjb3ZlcnlGcm9tU2VlZC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFBQSx3REFBeUI7QUFJekIsb0RBQW1EO0FBRW5EOztHQUVHO0FBQ0g7SUFFSTs7O09BR0c7SUFDSCxvQ0FBcUIsYUFBcUI7UUFBckIsa0JBQWEsR0FBYixhQUFhLENBQVE7SUFBRyxDQUFDO0lBRWpDLDhDQUFTLEdBQXRCOzs7Ozs7d0JBQ1UsbUJBQW1CLEdBQUc7NEJBQ3hCLEVBQUUsRUFBRSxDQUFDOzRCQUNMLE1BQU0sRUFBRSxzQkFBc0I7NEJBQzlCLE1BQU0sRUFBRSxFQUFFO3lCQUNiLENBQUE7d0JBQ3dCLHFCQUFNLGVBQUssQ0FBQyxJQUFJLENBQ3JDLElBQUksQ0FBQyxhQUFhLEVBQ2xCLG1CQUFtQixDQUN0QixFQUFBOzt3QkFISyxnQkFBZ0IsR0FBRyxTQUd4Qjt3QkFFRCxzQkFBTyxnQ0FBZSxDQUFDLFFBQVEsQ0FBQyxnQkFBZ0IsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLEVBQUE7Ozs7S0FDaEU7SUFDTCxpQ0FBQztBQUFELENBQUMsQUFyQkQsSUFxQkMifQ==