import { RadixPayloadAtom } from '../RadixAtomModel';
export default class RadixApplicationPayloadAtom extends RadixPayloadAtom {
    constructor(json) {
        super(json);
        this.serializationProperties.push('applicationId');
    }
    static withEncryptedPayload(payload, recipients, applicationId, encrypted = true) {
        let atom = new RadixApplicationPayloadAtom();
        atom.applicationId = applicationId;
        if (encrypted) {
            atom.addEncryptedPayload(payload, recipients);
        }
        else {
            atom.addUnencryptedPayload(payload);
        }
        // Destinations
        atom.destinations = [];
        for (let recipient of recipients) {
            atom.destinations.push(recipient.getUID());
        }
        // Action
        atom.action = 'STORE';
        atom.timestamps = { default: Date.now() };
        return atom;
    }
}
RadixApplicationPayloadAtom.SERIALIZER = -2040291185;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiUmFkaXhBcHBsaWNhdGlvblBheWxvYWRBdG9tLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vc3JjL21vZHVsZXMvYXRvbS9SYWRpeEFwcGxpY2F0aW9uUGF5bG9hZEF0b20udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLGdCQUFnQixFQUFnQixNQUFNLG1CQUFtQixDQUFBO0FBRWxFLE1BQU0sQ0FBQyxPQUFPLE9BQU8sMkJBQTRCLFNBQVEsZ0JBQWdCO0lBS3JFLFlBQVksSUFBYTtRQUNyQixLQUFLLENBQUMsSUFBSSxDQUFDLENBQUE7UUFFWCxJQUFJLENBQUMsdUJBQXVCLENBQUMsSUFBSSxDQUFDLGVBQWUsQ0FBQyxDQUFBO0lBQ3RELENBQUM7SUFFTSxNQUFNLENBQUMsb0JBQW9CLENBQzlCLE9BQWUsRUFDZixVQUEwQixFQUMxQixhQUFxQixFQUNyQixTQUFTLEdBQUcsSUFBSTtRQUVoQixJQUFJLElBQUksR0FBRyxJQUFJLDJCQUEyQixFQUFFLENBQUE7UUFDNUMsSUFBSSxDQUFDLGFBQWEsR0FBRyxhQUFhLENBQUE7UUFFbEMsSUFBSSxTQUFTLEVBQUU7WUFDWCxJQUFJLENBQUMsbUJBQW1CLENBQUMsT0FBTyxFQUFFLFVBQVUsQ0FBQyxDQUFBO1NBQ2hEO2FBQU07WUFDSCxJQUFJLENBQUMscUJBQXFCLENBQUMsT0FBTyxDQUFDLENBQUE7U0FDdEM7UUFFRCxlQUFlO1FBQ2YsSUFBSSxDQUFDLFlBQVksR0FBRyxFQUFFLENBQUE7UUFDdEIsS0FBSyxJQUFJLFNBQVMsSUFBSSxVQUFVLEVBQUU7WUFDOUIsSUFBSSxDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLE1BQU0sRUFBRSxDQUFDLENBQUE7U0FDN0M7UUFFRCxTQUFTO1FBQ1QsSUFBSSxDQUFDLE1BQU0sR0FBRyxPQUFPLENBQUE7UUFDckIsSUFBSSxDQUFDLFVBQVUsR0FBRyxFQUFFLE9BQU8sRUFBRSxJQUFJLENBQUMsR0FBRyxFQUFFLEVBQUUsQ0FBQTtRQUV6QyxPQUFPLElBQUksQ0FBQTtJQUNmLENBQUM7O0FBcENhLHNDQUFVLEdBQUcsQ0FBQyxVQUFVLENBQUEifQ==