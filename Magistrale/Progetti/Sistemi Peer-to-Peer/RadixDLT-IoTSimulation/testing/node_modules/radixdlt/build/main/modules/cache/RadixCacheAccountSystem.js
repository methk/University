"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = require("tslib");
var RadixCacheAccountSystem = /** @class */ (function () {
    function RadixCacheAccountSystem(keyPair, atomCache) {
        this.keyPair = keyPair;
        this.name = 'CACHE';
        if (atomCache) {
            this.atomCache = atomCache;
        }
    }
    RadixCacheAccountSystem.prototype.processAtomUpdate = function (atomUpdate) {
        return tslib_1.__awaiter(this, void 0, void 0, function () {
            return tslib_1.__generator(this, function (_a) {
                if (!this.atomCache) {
                    return [2 /*return*/];
                }
                // Just put it in the cache
                if (atomUpdate.action === 'STORE') {
                    this.atomCache.storeAtom(atomUpdate.atom);
                }
                else if (atomUpdate.action === 'DELETE') {
                    this.atomCache.deleteAtom(atomUpdate.atom);
                }
                return [2 /*return*/];
            });
        });
    };
    RadixCacheAccountSystem.prototype.loadAtoms = function () {
        return tslib_1.__awaiter(this, void 0, void 0, function () {
            return tslib_1.__generator(this, function (_a) {
                return [2 /*return*/, this.atomCache.getAtoms(this.keyPair)];
            });
        });
    };
    return RadixCacheAccountSystem;
}());
exports.default = RadixCacheAccountSystem;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiUmFkaXhDYWNoZUFjY291bnRTeXN0ZW0uanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9zcmMvbW9kdWxlcy9jYWNoZS9SYWRpeENhY2hlQWNjb3VudFN5c3RlbS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFZQTtJQUlJLGlDQUFxQixPQUFPLEVBQUUsU0FBa0M7UUFBM0MsWUFBTyxHQUFQLE9BQU8sQ0FBQTtRQUhyQixTQUFJLEdBQUcsT0FBTyxDQUFBO1FBSWpCLElBQUksU0FBUyxFQUFFO1lBQ1gsSUFBSSxDQUFDLFNBQVMsR0FBRyxTQUFTLENBQUE7U0FDN0I7SUFDTCxDQUFDO0lBRVksbURBQWlCLEdBQTlCLFVBQStCLFVBQTJCOzs7Z0JBQ3RELElBQUksQ0FBQyxJQUFJLENBQUMsU0FBUyxFQUFFO29CQUNqQixzQkFBTTtpQkFDVDtnQkFFRCwyQkFBMkI7Z0JBQzNCLElBQUksVUFBVSxDQUFDLE1BQU0sS0FBSyxPQUFPLEVBQUU7b0JBQy9CLElBQUksQ0FBQyxTQUFTLENBQUMsU0FBUyxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsQ0FBQTtpQkFDNUM7cUJBQU0sSUFBSSxVQUFVLENBQUMsTUFBTSxLQUFLLFFBQVEsRUFBRTtvQkFDdkMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxVQUFVLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxDQUFBO2lCQUM3Qzs7OztLQUNKO0lBRVksMkNBQVMsR0FBdEI7OztnQkFDSSxzQkFBTyxJQUFJLENBQUMsU0FBUyxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLEVBQUE7OztLQUMvQztJQUNMLDhCQUFDO0FBQUQsQ0FBQyxBQTFCRCxJQTBCQyJ9