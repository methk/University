"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = require("tslib");
var RadixAtomModel_1 = require("../RadixAtomModel");
var RadixBasicPayloadAtom = /** @class */ (function (_super) {
    tslib_1.__extends(RadixBasicPayloadAtom, _super);
    function RadixBasicPayloadAtom(json) {
        return _super.call(this, json) || this;
    }
    RadixBasicPayloadAtom.withEncryptedPayload = function (payload, recipients, encrypted) {
        var e_1, _a;
        if (encrypted === void 0) { encrypted = true; }
        var atom = new RadixBasicPayloadAtom();
        if (encrypted) {
            atom.addEncryptedPayload(payload, recipients);
        }
        else {
            atom.addUnencryptedPayload(payload);
        }
        // Destinations
        atom.destinations = [];
        try {
            for (var recipients_1 = tslib_1.__values(recipients), recipients_1_1 = recipients_1.next(); !recipients_1_1.done; recipients_1_1 = recipients_1.next()) {
                var recipient = recipients_1_1.value;
                atom.destinations.push(recipient.getUID());
            }
        }
        catch (e_1_1) { e_1 = { error: e_1_1 }; }
        finally {
            try {
                if (recipients_1_1 && !recipients_1_1.done && (_a = recipients_1.return)) _a.call(recipients_1);
            }
            finally { if (e_1) throw e_1.error; }
        }
        // Action
        atom.action = 'STORE';
        atom.timestamps = { default: Date.now() };
        return atom;
    };
    RadixBasicPayloadAtom.SERIALIZER = -257259791;
    return RadixBasicPayloadAtom;
}(RadixAtomModel_1.RadixPayloadAtom));
exports.default = RadixBasicPayloadAtom;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiUmFkaXhCYXNpY1BheWxvYWRBdG9tLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vc3JjL21vZHVsZXMvYXRvbS9SYWRpeEJhc2ljUGF5bG9hZEF0b20udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBQUEsb0RBQWtFO0FBRWxFO0lBQW1ELGlEQUFnQjtJQUcvRCwrQkFBWSxJQUFhO2VBQ3JCLGtCQUFNLElBQUksQ0FBQztJQUNmLENBQUM7SUFDYSwwQ0FBb0IsR0FBbEMsVUFDSSxPQUFZLEVBQ1osVUFBK0IsRUFDL0IsU0FBZ0I7O1FBQWhCLDBCQUFBLEVBQUEsZ0JBQWdCO1FBRWhCLElBQUksSUFBSSxHQUFHLElBQUkscUJBQXFCLEVBQUUsQ0FBQTtRQUV0QyxJQUFJLFNBQVMsRUFBRTtZQUNYLElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxPQUFPLEVBQUUsVUFBVSxDQUFDLENBQUE7U0FDaEQ7YUFBTTtZQUNILElBQUksQ0FBQyxxQkFBcUIsQ0FBQyxPQUFPLENBQUMsQ0FBQTtTQUN0QztRQUVELGVBQWU7UUFDZixJQUFJLENBQUMsWUFBWSxHQUFHLEVBQUUsQ0FBQTs7WUFDdEIsS0FBc0IsSUFBQSxlQUFBLGlCQUFBLFVBQVUsQ0FBQSxzQ0FBQSw4REFBRTtnQkFBN0IsSUFBSSxTQUFTLHVCQUFBO2dCQUNkLElBQUksQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxDQUFBO2FBQzdDOzs7Ozs7Ozs7UUFFRCxTQUFTO1FBQ1QsSUFBSSxDQUFDLE1BQU0sR0FBRyxPQUFPLENBQUE7UUFDckIsSUFBSSxDQUFDLFVBQVUsR0FBRyxFQUFFLE9BQU8sRUFBRSxJQUFJLENBQUMsR0FBRyxFQUFFLEVBQUUsQ0FBQTtRQUV6QyxPQUFPLElBQUksQ0FBQTtJQUNmLENBQUM7SUE3QmEsZ0NBQVUsR0FBRyxDQUFDLFNBQVMsQ0FBQTtJQThCekMsNEJBQUM7Q0FBQSxBQS9CRCxDQUFtRCxpQ0FBZ0IsR0ErQmxFO2tCQS9Cb0IscUJBQXFCIn0=